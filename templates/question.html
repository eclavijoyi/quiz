<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Pregunta {{ question.number }} - Simulacro de Examen</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .timer {
        font-weight: bold;
        font-size: 1.2em;
        color: red;
        margin-bottom: 20px;
      }
      .question {
        margin-bottom: 20px;
      }
      .info {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Simulacro de Examen</h1>
    <div class="timer">Tiempo restante: <span id="timer"></span></div>
    <div class="info">
      <p>Preguntas restantes: {{ remaining_count }}</p>
      <!-- BotÃ³n para activar el modo aleatorio -->
      <a href="{{ url_for('randomize') }}"
        ><button type="button">Activar Modo Aleatorio</button></a
      >
    </div>
    <div class="question">
      <p>
        <strong>Pregunta {{ question.number }}:</strong> {{ question.question }}
      </p>
      <form method="POST" id="questionForm">
        {% for key, value in question.options.items() %}
        <label>
          <input type="radio" name="answer" value="{{ key }}" required />
          ({{ key.upper() }}) {{ value }} </label
        ><br />
        {% endfor %}
        <br />
        <button type="submit">
          {% if question.number < total %}Siguiente{% else %}Finalizar{% endif
          %}
        </button>
      </form>
    </div>
    <script>
      let remaining = {{ remaining }};
      let timerDisplay = document.getElementById('timer');
      function formatTime(seconds) {
        let hrs = Math.floor(seconds / 3600);
        let mins = Math.floor((seconds % 3600) / 60);
        let secs = seconds % 60;
        return (hrs < 10 ? "0" + hrs : hrs) + ":" + (mins < 10 ? "0" + mins : mins) + ":" + (secs < 10 ? "0" + secs : secs);
      }
      timerDisplay.textContent = formatTime(remaining);
      let countdown = setInterval(function(){
        remaining--;
        timerDisplay.textContent = formatTime(remaining);
        if (remaining <= 0) {
          clearInterval(countdown);
          document.getElementById('questionForm').submit();
        }
      }, 1000);
    </script>
  </body>
</html>
